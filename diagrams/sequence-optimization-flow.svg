<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="2346px" preserveAspectRatio="none" style="width:1586px;height:2346px;background:#003153;" version="1.1" viewBox="0 0 1586 2346" width="1586px" zoomAndPan="magnify"><title>Flujo 2: Generaci&#243;n de Recomendaciones de Optimizaci&#243;n</title><defs/><g><rect fill="#003153" height="2346" style="stroke:transparent;stroke-width:1;" width="1586" x="0" y="0"/><text fill="#D9D3D0" font-family="Verdana" font-size="22" font-weight="bold" lengthAdjust="spacing" textLength="714.5596" x="434.6272" y="37.1182">Flujo 2: Generaci&#243;n de Recomendaciones de Optimizaci&#243;n</text><g><title>API Backend</title><rect fill="#003153" height="1866.7412" style="stroke:#D9D3D0;stroke-width:1;" width="10" x="443.3232" y="307.3618"/></g><g><title>PostgreSQL</title><rect fill="#003153" height="334.9897" style="stroke:#D9D3D0;stroke-width:1;" width="10" x="901.8799" y="432.5591"/></g><g><title>PostgreSQL</title><rect fill="#003153" height="160.3945" style="stroke:#D9D3D0;stroke-width:1;" width="10" x="901.8799" y="1819.314"/></g><g><title>Motor de Optimizaci&#243;n</title><rect fill="#003153" height="793.9727" style="stroke:#D9D3D0;stroke-width:1;" width="10" x="1064.832" y="935.9434"/></g><g><title>Web Application</title><rect fill="#003153" height="97.1973" style="stroke:#D9D3D0;stroke-width:1;" width="10" x="1388.9136" y="2041.1064"/></g><g><title>Trigger</title><rect fill="transparent" height="2117.9351" width="8" x="171.1016" y="132.7666"/><line style="stroke:#D9D3D0;stroke-width:1;" x1="175" x2="175" y1="132.7666" y2="2250.7017"/></g><g><title>API Backend</title><rect fill="transparent" height="2117.9351" width="8" x="444.3232" y="132.7666"/><line style="stroke:#D9D3D0;stroke-width:1;" x1="448.123" x2="448.123" y1="132.7666" y2="2250.7017"/></g><g><title>PostgreSQL</title><rect fill="transparent" height="2117.9351" width="8" x="902.8799" y="132.7666"/><line style="stroke:#D9D3D0;stroke-width:1;" x1="905.9307" x2="905.9307" y1="132.7666" y2="2250.7017"/></g><g><title>Motor de Optimizaci&#243;n</title><rect fill="transparent" height="2117.9351" width="8" x="1065.832" y="132.7666"/><line style="stroke:#D9D3D0;stroke-width:1;" x1="1069.8291" x2="1069.8291" y1="132.7666" y2="2250.7017"/></g><g><title>Web Application</title><rect fill="transparent" height="2117.9351" width="8" x="1389.9136" y="132.7666"/><line style="stroke:#D9D3D0;stroke-width:1;" x1="1393.4419" x2="1393.4419" y1="132.7666" y2="2250.7017"/></g><rect fill="#003153" height="48.0293" rx="2.5" ry="2.5" style="stroke:#D9D3D0;stroke-width:1;" width="64.2031" x="143" y="83.7373"/><text fill="#D9D3D0" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="50.2031" x="150" y="104.8125">Trigger</text><text fill="#D9D3D0" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="48.5352" x="150.834" y="121.8271">Source</text><rect fill="#003153" height="48.0293" rx="2.5" ry="2.5" style="stroke:#D9D3D0;stroke-width:1;" width="64.2031" x="143" y="2249.7017"/><text fill="#D9D3D0" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="50.2031" x="150" y="2270.7769">Trigger</text><text fill="#D9D3D0" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="48.5352" x="150.834" y="2287.7915">Source</text><rect fill="#003153" height="48.0293" rx="2.5" ry="2.5" style="stroke:#D9D3D0;stroke-width:1;" width="138.4004" x="379.123" y="83.7373"/><text fill="#D9D3D0" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="88.334" x="404.1563" y="104.8125">API Backend</text><text fill="#D9D3D0" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="124.4004" x="386.123" y="121.8271">(Cloud Functions)</text><rect fill="#003153" height="48.0293" rx="2.5" ry="2.5" style="stroke:#D9D3D0;stroke-width:1;" width="138.4004" x="379.123" y="2249.7017"/><text fill="#D9D3D0" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="88.334" x="404.1563" y="2270.7769">API Backend</text><text fill="#D9D3D0" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="124.4004" x="386.123" y="2287.7915">(Cloud Functions)</text><text fill="#D9D3D0" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="81.1699" x="863.2949" y="112.8125">PostgreSQL</text><text fill="#D9D3D0" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="107.8984" x="849.9307" y="129.8271">(Data Connect)</text><path d="M888.8799,62.7373 C888.8799,52.7373 906.8799,52.7373 906.8799,52.7373 C906.8799,52.7373 924.8799,52.7373 924.8799,62.7373 L924.8799,88.7373 C924.8799,98.7373 906.8799,98.7373 906.8799,98.7373 C906.8799,98.7373 888.8799,98.7373 888.8799,88.7373 L888.8799,62.7373 " fill="#003153" style="stroke:#D9D3D0;stroke-width:1.5;"/><path d="M888.8799,62.7373 C888.8799,72.7373 906.8799,72.7373 906.8799,72.7373 C906.8799,72.7373 924.8799,72.7373 924.8799,62.7373 " fill="transparent" style="stroke:#D9D3D0;stroke-width:1.5;"/><text fill="#D9D3D0" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="81.1699" x="863.2949" y="2263.7769">PostgreSQL</text><text fill="#D9D3D0" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="107.8984" x="849.9307" y="2280.7915">(Data Connect)</text><path d="M888.8799,2293.731 C888.8799,2283.731 906.8799,2283.731 906.8799,2283.731 C906.8799,2283.731 924.8799,2283.731 924.8799,2293.731 L924.8799,2319.731 C924.8799,2329.731 906.8799,2329.731 906.8799,2329.731 C906.8799,2329.731 888.8799,2329.731 888.8799,2319.731 L888.8799,2293.731 " fill="#003153" style="stroke:#D9D3D0;stroke-width:1.5;"/><path d="M888.8799,2293.731 C888.8799,2303.731 906.8799,2303.731 906.8799,2303.731 C906.8799,2303.731 924.8799,2303.731 924.8799,2293.731 " fill="transparent" style="stroke:#D9D3D0;stroke-width:1.5;"/><rect fill="#003153" height="48.0293" rx="2.5" ry="2.5" style="stroke:#D9D3D0;stroke-width:1;" width="172.0059" x="983.8291" y="83.7373"/><text fill="#D9D3D0" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="158.0059" x="990.8291" y="104.8125">Motor de Optimizaci&#243;n</text><text fill="#D9D3D0" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="155.21" x="992.2271" y="121.8271">(Timefold, Cloud Run)</text><rect fill="#003153" height="48.0293" rx="2.5" ry="2.5" style="stroke:#D9D3D0;stroke-width:1;" width="172.0059" x="983.8291" y="2249.7017"/><text fill="#D9D3D0" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="158.0059" x="990.8291" y="2270.7769">Motor de Optimizaci&#243;n</text><text fill="#D9D3D0" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="155.21" x="992.2271" y="2287.7915">(Timefold, Cloud Run)</text><rect fill="#003153" height="48.0293" rx="2.5" ry="2.5" style="stroke:#D9D3D0;stroke-width:1;" width="126.9434" x="1330.4419" y="83.7373"/><text fill="#D9D3D0" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="112.9434" x="1337.4419" y="104.8125">Web Application</text><text fill="#D9D3D0" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="52.0078" x="1367.9097" y="121.8271">(React)</text><rect fill="#003153" height="48.0293" rx="2.5" ry="2.5" style="stroke:#D9D3D0;stroke-width:1;" width="126.9434" x="1330.4419" y="2249.7017"/><text fill="#D9D3D0" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="112.9434" x="1337.4419" y="2270.7769">Web Application</text><text fill="#D9D3D0" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="52.0078" x="1367.9097" y="2287.7915">(React)</text><g><title>API Backend</title><rect fill="#003153" height="1866.7412" style="stroke:#D9D3D0;stroke-width:1;" width="10" x="443.3232" y="307.3618"/></g><g><title>PostgreSQL</title><rect fill="#003153" height="334.9897" style="stroke:#D9D3D0;stroke-width:1;" width="10" x="901.8799" y="432.5591"/></g><g><title>PostgreSQL</title><rect fill="#003153" height="160.3945" style="stroke:#D9D3D0;stroke-width:1;" width="10" x="901.8799" y="1819.314"/></g><g><title>Motor de Optimizaci&#243;n</title><rect fill="#003153" height="793.9727" style="stroke:#D9D3D0;stroke-width:1;" width="10" x="1064.832" y="935.9434"/></g><g><title>Web Application</title><rect fill="#003153" height="97.1973" style="stroke:#D9D3D0;stroke-width:1;" width="10" x="1388.9136" y="2041.1064"/></g><rect fill="#003153" height="3" style="stroke:#003153;stroke-width:1;" width="1574.814" x="5" y="163.6663"/><line style="stroke:#D9D3D0;stroke-width:0.5;" x1="5" x2="1579.814" y1="163.6663" y2="163.6663"/><line style="stroke:#D9D3D0;stroke-width:0.5;" x1="5" x2="1579.814" y1="166.6663" y2="166.6663"/><rect fill="#003153" height="23.7993" style="stroke:#D9D3D0;stroke-width:1;" width="289.6025" x="647.6057" y="152.7666"/><text fill="#D9D3D0" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="271.1592" x="653.6057" y="169.8364">Activaci&#243;n del Motor de Optimizaci&#243;n</text><path d="M10,191.5659 L10,264.5659 L340,264.5659 L340,201.5659 L330,191.5659 L10,191.5659 " fill="#003153" style="stroke:#D9D3D0;stroke-width:1;"/><path d="M330,191.5659 L330,201.5659 L340,201.5659 L330,191.5659 " fill="#003153" style="stroke:#D9D3D0;stroke-width:1;"/><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="252.3003" x="16" y="209.6357">El motor puede activarse de 3 formas:</text><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="12.9937" x="16" y="225.4351">1.</text><text fill="#D9D3D0" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="83.5796" x="33.564" y="225.4351">Autom&#225;tico</text><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="208.4507" x="117.1436" y="225.4351">: Tras ingesta de PDFs (Flujo 1)</text><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="12.9937" x="16" y="241.2344">2.</text><text fill="#D9D3D0" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="52.6538" x="33.564" y="241.2344">Manual</text><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="210.6279" x="86.2178" y="241.2344">: Solicitud de operador (Flujo 3)</text><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="12.9937" x="16" y="257.0337">3.</text><text fill="#D9D3D0" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="68.0977" x="33.564" y="257.0337">Peri&#243;dico</text><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="212.5322" x="101.6616" y="257.0337">: Cloud Scheduler (programado)</text><polygon fill="#D9D3D0" points="431.3232,303.3618,441.3232,307.3618,431.3232,311.3618,435.3232,307.3618" style="stroke:#D9D3D0;stroke-width:1;"/><line style="stroke:#D9D3D0;stroke-width:1;" x1="175.1016" x2="437.3232" y1="307.3618" y2="307.3618"/><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="175.4111" x="221.5068" y="286.833">POST /trigger-optimization</text><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="249.2217" x="184.6016" y="302.6323">{"reason": "auto|manual|scheduled"}</text><path d="M358,320.3618 L358,361.3618 L537,361.3618 L537,330.3618 L527,320.3618 L358,320.3618 " fill="#003153" style="stroke:#D9D3D0;stroke-width:1;"/><path d="M527,320.3618 L527,330.3618 L537,330.3618 L527,320.3618 " fill="#003153" style="stroke:#D9D3D0;stroke-width:1;"/><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="158.2788" x="364" y="338.4316">API Backend coordina el</text><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="157.6885" x="364" y="354.231">proceso de optimizaci&#243;n</text><rect fill="#003153" height="3" style="stroke:#003153;stroke-width:1;" width="1574.814" x="5" y="387.8601"/><line style="stroke:#D9D3D0;stroke-width:0.5;" x1="5" x2="1579.814" y1="387.8601" y2="387.8601"/><line style="stroke:#D9D3D0;stroke-width:0.5;" x1="5" x2="1579.814" y1="390.8601" y2="390.8601"/><rect fill="#003153" height="23.7993" style="stroke:#D9D3D0;stroke-width:1;" width="203.0586" x="690.8777" y="376.9604"/><text fill="#D9D3D0" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="184.6152" x="696.8777" y="394.0303">Recopilaci&#243;n de Contexto</text><polygon fill="#D9D3D0" points="889.8799,428.5591,899.8799,432.5591,889.8799,436.5591,893.8799,432.5591" style="stroke:#D9D3D0;stroke-width:1;"/><line style="stroke:#D9D3D0;stroke-width:1;" x1="453.3232" x2="895.8799" y1="432.5591" y2="432.5591"/><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="228.833" x="563.1851" y="427.8296">SELECT &#243;rdenes export pendientes</text><polygon fill="#D9D3D0" points="464.3232,474.1577,454.3232,478.1577,464.3232,482.1577,460.3232,478.1577" style="stroke:#D9D3D0;stroke-width:1;"/><line style="stroke:#D9D3D0;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="458.3232" x2="900.8799" y1="478.1577" y2="478.1577"/><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="133.7705" x="610.7163" y="457.6289">Lista &#243;rdenes export</text><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="390.146" x="482.5286" y="473.4282">[{id, cliente, ubicaci&#243;n, tipo_contenedor, fecha_l&#237;mite, ...}]</text><polygon fill="#D9D3D0" points="889.8799,535.5557,899.8799,539.5557,889.8799,543.5557,893.8799,539.5557" style="stroke:#D9D3D0;stroke-width:1;"/><line style="stroke:#D9D3D0;stroke-width:1;" x1="453.3232" x2="895.8799" y1="539.5557" y2="539.5557"/><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="269.9595" x="542.6218" y="503.2275">SELECT contenedores vac&#237;os disponibles:</text><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="356.4844" x="499.3594" y="519.0269">- En terminales (Barcelona, Noain, Agoncillo, Miranda)</text><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="261.936" x="546.6335" y="534.8262">- Post-import en ubicaciones de clientes</text><polygon fill="#D9D3D0" points="464.3232,581.1543,454.3232,585.1543,464.3232,589.1543,460.3232,585.1543" style="stroke:#D9D3D0;stroke-width:1;"/><line style="stroke:#D9D3D0;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="458.3232" x2="900.8799" y1="585.1543" y2="585.1543"/><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="194.2065" x="580.4983" y="564.6255">Stock de contenedores vac&#237;os</text><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="278.1035" x="538.5498" y="580.4248">[{id, tipo, ubicaci&#243;n, estado, naviera, ...}]</text><polygon fill="#D9D3D0" points="889.8799,626.7529,899.8799,630.7529,889.8799,634.7529,893.8799,630.7529" style="stroke:#D9D3D0;stroke-width:1;"/><line style="stroke:#D9D3D0;stroke-width:1;" x1="453.3232" x2="895.8799" y1="630.7529" y2="630.7529"/><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="204.1724" x="575.5154" y="610.2241">SELECT ubicaciones de clientes</text><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="141.4956" x="606.8538" y="626.0234">con coordenadas GPS</text><polygon fill="#D9D3D0" points="464.3232,672.3516,454.3232,676.3516,464.3232,680.3516,460.3232,676.3516" style="stroke:#D9D3D0;stroke-width:1;"/><line style="stroke:#D9D3D0;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="458.3232" x2="900.8799" y1="676.3516" y2="676.3516"/><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="164.2139" x="595.4946" y="655.8228">Coordenadas geogr&#225;ficas</text><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="236.7422" x="559.2305" y="671.6221">[{cliente_id, lat, lon, direcci&#243;n, ...}]</text><polygon fill="#D9D3D0" points="889.8799,717.9502,899.8799,721.9502,889.8799,725.9502,893.8799,721.9502" style="stroke:#D9D3D0;stroke-width:1;"/><line style="stroke:#D9D3D0;stroke-width:1;" x1="453.3232" x2="895.8799" y1="721.9502" y2="721.9502"/><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="236.1772" x="559.5129" y="701.4214">SELECT par&#225;metros de optimizaci&#243;n</text><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="210.1455" x="572.5288" y="717.2207">(pesos, restricciones, umbrales)</text><polygon fill="#D9D3D0" points="464.3232,763.5488,454.3232,767.5488,464.3232,771.5488,460.3232,767.5488" style="stroke:#D9D3D0;stroke-width:1;"/><line style="stroke:#D9D3D0;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="458.3232" x2="905.8799" y1="767.5488" y2="767.5488"/><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="196.4409" x="581.8811" y="747.02">Configuraci&#243;n de optimizaci&#243;n</text><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="424.5566" x="467.8232" y="762.8193">{peso_coste, peso_tiempo, peso_co2, radio_matching_max, ...}</text><rect fill="#003153" height="3" style="stroke:#003153;stroke-width:1;" width="1574.814" x="5" y="796.4485"/><line style="stroke:#D9D3D0;stroke-width:0.5;" x1="5" x2="1579.814" y1="796.4485" y2="796.4485"/><line style="stroke:#D9D3D0;stroke-width:0.5;" x1="5" x2="1579.814" y1="799.4485" y2="799.4485"/><rect fill="#003153" height="23.7993" style="stroke:#D9D3D0;stroke-width:1;" width="240.478" x="672.168" y="785.5488"/><text fill="#D9D3D0" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="222.0347" x="678.168" y="802.6187">Invocaci&#243;n del Motor Timefold</text><polygon fill="#D9D3D0" points="1052.832,931.9434,1062.832,935.9434,1052.832,939.9434,1056.832,935.9434" style="stroke:#D9D3D0;stroke-width:1;"/><line style="stroke:#D9D3D0;stroke-width:1;" x1="453.3232" x2="1058.832" y1="935.9434" y2="935.9434"/><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="100.9087" x="708.6233" y="836.418">POST /optimize</text><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="8.252" x="754.9517" y="852.2173">{</text><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="143.584" x="691.856" y="868.0166">ordenes_export: [...],</text><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="177.7471" x="674.7744" y="883.8159">contenedores_vacios: [...],</text><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="121.3418" x="702.9771" y="899.6152">ubicaciones: {...},</text><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="116.1494" x="705.5732" y="915.4146">parametros: {...}</text><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="8.252" x="754.9517" y="931.2139">}</text><path d="M1079,948.9434 L1079,1005.9434 L1244,1005.9434 L1244,958.9434 L1234,948.9434 L1079,948.9434 " fill="#003153" style="stroke:#D9D3D0;stroke-width:1;"/><path d="M1234,948.9434 L1234,958.9434 L1244,958.9434 L1234,948.9434 " fill="#003153" style="stroke:#D9D3D0;stroke-width:1;"/><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="144.3774" x="1085" y="967.0132">Motor de optimizaci&#243;n</text><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="109.4844" x="1085" y="982.8125">constraint-based</text><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="129.4541" x="1085" y="998.6118">con Timefold Solver</text><line style="stroke:#D9D3D0;stroke-width:1;" x1="1074.832" x2="1116.832" y1="1080.5386" y2="1080.5386"/><line style="stroke:#D9D3D0;stroke-width:1;" x1="1116.832" x2="1116.832" y1="1080.5386" y2="1093.5386"/><line style="stroke:#D9D3D0;stroke-width:1;" x1="1075.832" x2="1116.832" y1="1093.5386" y2="1093.5386"/><polygon fill="#D9D3D0" points="1085.832,1089.5386,1075.832,1093.5386,1085.832,1097.5386,1081.832,1093.5386" style="stroke:#D9D3D0;stroke-width:1;"/><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="179.9497" x="1081.832" y="1028.4111">Construcci&#243;n del problema:</text><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="147.9004" x="1097.8567" y="1044.2104">- Variables de decisi&#243;n</text><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="118.0981" x="1112.7578" y="1060.0098">- Hard constraints</text><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="113.3438" x="1115.135" y="1075.8091">- Soft constraints</text><line style="stroke:#D9D3D0;stroke-width:1;" x1="1074.832" x2="1116.832" y1="1218.1338" y2="1218.1338"/><line style="stroke:#D9D3D0;stroke-width:1;" x1="1116.832" x2="1116.832" y1="1218.1338" y2="1231.1338"/><line style="stroke:#D9D3D0;stroke-width:1;" x1="1075.832" x2="1116.832" y1="1231.1338" y2="1231.1338"/><polygon fill="#D9D3D0" points="1085.832,1227.1338,1075.832,1231.1338,1085.832,1235.1338,1081.832,1231.1338" style="stroke:#D9D3D0;stroke-width:1;"/><text fill="#D9D3D0" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="170.5298" x="1141.6079" y="1118.6084">Algoritmo de Matching:</text><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="290.0815" x="1081.832" y="1134.4077">- Identifica contenedores vac&#237;os post-import</text><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="214.2524" x="1119.7466" y="1150.207">- Busca &#243;rdenes export cercanas</text><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="207.3652" x="1123.1902" y="1166.0063">- Calcula proximidad geogr&#225;fica</text><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="214.6587" x="1119.5435" y="1181.8057">- Verifica compatibilidad de tipos</text><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="191.6929" x="1131.0264" y="1197.605">- Valida ventanas temporales</text><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="215.9473" x="1118.8992" y="1213.4043">- Aplica restricciones de navieras</text><line style="stroke:#D9D3D0;stroke-width:1;" x1="1074.832" x2="1116.832" y1="1324.1304" y2="1324.1304"/><line style="stroke:#D9D3D0;stroke-width:1;" x1="1116.832" x2="1116.832" y1="1324.1304" y2="1337.1304"/><line style="stroke:#D9D3D0;stroke-width:1;" x1="1075.832" x2="1116.832" y1="1337.1304" y2="1337.1304"/><polygon fill="#D9D3D0" points="1085.832,1333.1304,1075.832,1337.1304,1085.832,1341.1304,1081.832,1337.1304" style="stroke:#D9D3D0;stroke-width:1;"/><text fill="#D9D3D0" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="201.1128" x="1086.9546" y="1256.2036">Optimizaci&#243;n Multiobjetivo:</text><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="204.9277" x="1085.0471" y="1272.0029">- Minimizar coste de transporte</text><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="211.3579" x="1081.832" y="1287.8022">- Minimizar tiempo de operaci&#243;n</text><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="174.8335" x="1100.0942" y="1303.6016">- Minimizar emisiones CO2</text><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="199.1069" x="1087.9575" y="1319.4009">- Maximizar tasa de utilizaci&#243;n</text><path d="M1079,1350.1304 L1079,1438.1304 L1298,1438.1304 L1298,1360.1304 L1288,1350.1304 L1079,1350.1304 " fill="#003153" style="stroke:#D9D3D0;stroke-width:1;"/><path d="M1288,1350.1304 L1288,1360.1304 L1298,1360.1304 L1288,1350.1304 " fill="#003153" style="stroke:#D9D3D0;stroke-width:1;"/><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="198.1294" x="1085" y="1368.2002">Algoritmos de b&#250;squeda local:</text><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="92.1743" x="1085" y="1383.9995">- Tabu Search</text><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="145.063" x="1085" y="1399.7988">- Simulated Annealing</text><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="116.9048" x="1085" y="1415.5981">- Late Acceptance</text><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="195.292" x="1085" y="1431.3975">Hasta convergencia o timeout</text><line style="stroke:#D9D3D0;stroke-width:1;" x1="1074.832" x2="1116.832" y1="1481.7256" y2="1481.7256"/><line style="stroke:#D9D3D0;stroke-width:1;" x1="1116.832" x2="1116.832" y1="1481.7256" y2="1494.7256"/><line style="stroke:#D9D3D0;stroke-width:1;" x1="1075.832" x2="1116.832" y1="1494.7256" y2="1494.7256"/><polygon fill="#D9D3D0" points="1085.832,1490.7256,1075.832,1494.7256,1085.832,1498.7256,1081.832,1494.7256" style="stroke:#D9D3D0;stroke-width:1;"/><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="180.6416" x="1093.4863" y="1461.1968">Genera soluci&#243;n optimizada</text><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="203.9502" x="1081.832" y="1476.9961">con scoring por recomendaci&#243;n</text><polygon fill="#D9D3D0" points="464.3232,1725.916,454.3232,1729.916,464.3232,1733.916,460.3232,1729.916" style="stroke:#D9D3D0;stroke-width:1;"/><line style="stroke:#D9D3D0;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="458.3232" x2="1068.832" y1="1729.916" y2="1729.916"/><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="158.6787" x="682.2383" y="1519.7954">JSON recomendaciones:</text><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="5.9033" x="758.626" y="1535.5947">[</text><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="8.252" x="762.022" y="1551.394">{</text><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="134.5894" x="703.4236" y="1567.1934">recommendation_id,</text><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="110.627" x="715.4048" y="1582.9927">import_order_id,</text><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="109.8525" x="715.792" y="1598.792">export_order_id,</text><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="85.5664" x="727.9351" y="1614.5913">container_id,</text><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="141.4766" x="699.98" y="1630.3906">ruta_propuesta: [...],</text><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="238.6973" x="651.3696" y="1646.1899">ahorro_estimado: {coste, km, co2},</text><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="166.772" x="687.3323" y="1661.9893">confidence_score: 0-100,</text><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="272.4414" x="634.4976" y="1677.7886">motivo: "matching directo import-export"</text><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="12.981" x="759.6575" y="1693.5879">},</text><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="14.187" x="759.0544" y="1709.3872">...</text><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="5.9033" x="758.626" y="1725.1865">]</text><rect fill="#003153" height="3" style="stroke:#003153;stroke-width:1;" width="1574.814" x="5" y="1758.8157"/><line style="stroke:#D9D3D0;stroke-width:0.5;" x1="5" x2="1579.814" y1="1758.8157" y2="1758.8157"/><line style="stroke:#D9D3D0;stroke-width:0.5;" x1="5" x2="1579.814" y1="1761.8157" y2="1761.8157"/><rect fill="#003153" height="23.7993" style="stroke:#D9D3D0;stroke-width:1;" width="244.7754" x="670.0193" y="1747.916"/><text fill="#D9D3D0" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="226.332" x="676.0193" y="1764.9858">Almacenamiento y Notificaci&#243;n</text><polygon fill="#D9D3D0" points="889.8799,1815.314,899.8799,1819.314,889.8799,1823.314,893.8799,1819.314" style="stroke:#D9D3D0;stroke-width:1;"/><line style="stroke:#D9D3D0;stroke-width:1;" x1="453.3232" x2="895.8799" y1="1819.314" y2="1819.314"/><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="167.375" x="593.9141" y="1798.7852">INSERT recomendaciones</text><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="148.478" x="603.3625" y="1814.5845">con estado "PENDING"</text><path d="M916,1832.314 L916,1936.314 L1129,1936.314 L1129,1842.314 L1119,1832.314 L916,1832.314 " fill="#003153" style="stroke:#D9D3D0;stroke-width:1;"/><path d="M1119,1832.314 L1119,1842.314 L1129,1842.314 L1119,1832.314 " fill="#003153" style="stroke:#D9D3D0;stroke-width:1;"/><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="192.5688" x="922" y="1850.3838">Cada recomendaci&#243;n incluye:</text><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="137.3252" x="922" y="1866.1831">- Matching espec&#237;fico</text><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="104.8633" x="922" y="1881.9824">- Ruta detallada</text><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="128.502" x="922" y="1897.7817">- Impacto estimado</text><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="121.6909" x="922" y="1913.5811">- Confidence score</text><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="179.499" x="922" y="1929.3804">- Timestamp de generaci&#243;n</text><polygon fill="#D9D3D0" points="464.3232,1975.7085,454.3232,1979.7085,464.3232,1983.7085,460.3232,1979.7085" style="stroke:#D9D3D0;stroke-width:1;"/><line style="stroke:#D9D3D0;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="458.3232" x2="905.8799" y1="1979.7085" y2="1979.7085"/><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="206.5718" x="576.8157" y="1959.1797">Recomendaciones almacenadas</text><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="181.6572" x="589.2729" y="1974.979">[{recommendation_id, ...}]</text><polygon fill="#D9D3D0" points="1376.9136,2037.1064,1386.9136,2041.1064,1376.9136,2045.1064,1380.9136,2041.1064" style="stroke:#D9D3D0;stroke-width:1;"/><line style="stroke:#D9D3D0;stroke-width:1;" x1="453.3232" x2="1382.9136" y1="2041.1064" y2="2041.1064"/><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="180.8003" x="830.7183" y="2004.7783">Notificaci&#243;n en tiempo real:</text><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="242.9692" x="799.6338" y="2020.5776">Nuevas recomendaciones disponibles</text><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="212.2275" x="815.0046" y="2036.377">{"count": N, "timestamp": "..."}</text><path d="M1403,2054.1064 L1403,2111.1064 L1574,2111.1064 L1574,2064.1064 L1564,2054.1064 L1403,2054.1064 " fill="#003153" style="stroke:#D9D3D0;stroke-width:1;"/><path d="M1564,2054.1064 L1564,2064.1064 L1574,2064.1064 L1564,2054.1064 " fill="#003153" style="stroke:#D9D3D0;stroke-width:1;"/><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="123.7539" x="1409" y="2072.1763">Notificaci&#243;n push a</text><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="150.814" x="1409" y="2087.9756">operadores conectados</text><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="104.7744" x="1409" y="2103.7749">en el dashboard</text><polygon fill="#D9D3D0" points="464.3232,2134.3037,454.3232,2138.3037,464.3232,2142.3037,460.3232,2138.3037" style="stroke:#D9D3D0;stroke-width:1;"/><line style="stroke:#D9D3D0;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="458.3232" x2="1392.9136" y1="2138.3037" y2="2138.3037"/><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="26.9712" x="910.1328" y="2133.5742">ACK</text><line style="stroke:#D9D3D0;stroke-width:1;" x1="453.3232" x2="495.3232" y1="2173.103" y2="2173.103"/><line style="stroke:#D9D3D0;stroke-width:1;" x1="495.3232" x2="495.3232" y1="2173.103" y2="2186.103"/><line style="stroke:#D9D3D0;stroke-width:1;" x1="448.3232" x2="495.3232" y1="2186.103" y2="2186.103"/><polygon fill="#D9D3D0" points="458.3232,2182.103,448.3232,2186.103,458.3232,2190.103,454.3232,2186.103" style="stroke:#D9D3D0;stroke-width:1;"/><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="290.8052" x="460.3232" y="2168.3735">Log: Optimizaci&#243;n completada exitosamente</text><path d="M119,2194.103 L119,2235.103 L1448,2235.103 L1448,2204.103 L1438,2194.103 L119,2194.103 " fill="#003153" style="stroke:#D9D3D0;stroke-width:1;"/><path d="M1438,2194.103 L1438,2204.103 L1448,2204.103 L1438,2194.103 " fill="#003153" style="stroke:#D9D3D0;stroke-width:1;"/><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="276.7324" x="640.8264" y="2212.1729">Las recomendaciones est&#225;n listas para ser</text><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="249.2788" x="640.8264" y="2227.9722">revisadas por los operadores (Flujo 3)</text><!--SRC=[XLVBSXit4BppAoOyMIhIiUKRgvmgYf8T9PAiYAha4BbO81OY4ME13O1Lb3Z-67z0JhdboXzB3x3BNL9oSb69WrVFJ4_Fx5TnhKf5IrEhociR1-63jfNmeYIlGkLiK1Sg1B5InygutwRUkzye-bhrDWRrQwsiR3TEZLvPaif6vGU3gADHzCRKlpWwcj1RPPKNKc_-jbGekbRIbSeMi3Yh0flULL6N-e-yPp304r5BNGaRQNZZzMgb_AsTkzfBDIGHgB7jRfnUdT6na1zmzQrzDZEkBkXDRMN4C-4WdSEMGI6YM8gWQ7ZbGbnvDV_X7FjFOAQPirR9c3UV7E_UV-6Yyu_GukYDBjMTCyM8ygFNjSqtj0kxz_oabZIjAgEbO6Yuu5g9zb4iOcqmUFsQfa1-lmsReQVVfzUl1mFheY9th_msCaIdXifqegeL3ebqcuVV-F6AxfmlHPXWtyldT7WuhQChDvy1qXqUJd0Be6YxKW51mVwhapU1dkM4lZp0eIC-T25iBGpldpjueoDynsPN8Ti57cuElE83h_Z0bVA0N3IFv63DvLeLjG7qPvLtAt0BPmy6I2AnLuD1un6Dl-7qJUZgtVo6lexPEdPDB78aFmwz4i7PuOI60YxzMIQ8VuRcaMBuQP03WNWn6NgHuvz4FHAHTCuNsWfI1Yj09rLmsSC-NJkeI1gJkzAcOpie5TL3T2bFV3lyE3b6o4xFJsStjFdR5ughG3rKpaUgS9lcCWeTK13nv9Z6RG3EDMTbx-2j_VcZ1WEbIQT7L2_1huHYH55NRY4PY5L8p8Zkb5oBXTdyLMhU-_pvyq_ldqBNdS53uEBcBuTwrQmHUcbKcDpQCPrQGjMN21GizEnOe4gDis94bqveF3zTEIkrCMv45zeBLFu1d-Fo6-iokQri2xYLXCQHiEFwF3hv8Qq-0QmD0Nkxwp_Jk83DYdiDRlw7mry0SMlnOEQ3ig90SRozckyWc_NMLWeytdo-mrK9L7FBWi4P4V770LIXlP8Dm2_YWN1iFfSgUXSU4G_2KO6GOSIgZNgG6JTSBvUUSt6mXz3UwLNT4-AzspxoRQ19O4ga_wDM9SUoMJZ2IwBGRb6AADUG1_ppaC4F1eNgyvLBuSpUE_b8lrfDxDT3QskBkm6cWEdM4hdCz4Lc-eH-nellHxpIfy62jTA5_d8lcnFwo3YJENMm5DF6Ucjxih0LxQmDq9br97VNsQbJubqXI7YG2P0-Zhd55DdK-GoTXDJqnQrTsOd2B5rJoovs41_KMobImVqel1PSVWoXK5A7dC0nVIjyqGCHs3PtTx5l-zAZQ09cvRoEPTAuYoR7ayD3lkKCAOYQAVsqA5HTCVFsuph8Hng5-S1BOKM2DHD6raQmPm-8OI6AVjqaDz4jcWVB2WA_r2Pj0pWkyP13mJQw1pY-64B449Zyl3fDJNQtFFXuemF_4OhT5djH6_INvIyA575DG2wqJJiyfOf9gA1jWHrLknjo6MrResoprUrG9NAOqCtU7QKbyT0U5Y6ru3h2_Us4z4LgRdEO75rk_WcOqn0XWr8qtEx7T2EMDSqLP7gTVizrYKH4LT0Kqmy2QbV9VfwQf9IgGcobWkrRmPq7-GU9LvZ-j207xqhbwlY_fCvJ80LdwXpLjdWAaUKrI22tAr398sNR6J7vsrtPojbtytUN_MsfoA6sNE19DIYlfcMU3bX-iptJTC6ouZjhvkY-bScEikcRV1t50hJ5N8LmzFM6IAmTfkK55ZJFCT2NHay_bEZDxkXJT-sTBdY0Nh3RQa8lnYzVl6XMCRSnqMZO2crk5XWYClHnnZhatVb6GBYrx_iYtCaOZvAc51ZEHScDoD7lwCovcBiHijTxpYxdfzSt-y7DISgj5BFpwUN9sUNRuSwKiijA60XbNeYzR6AmbAR-NMKsjZg3coi5BG4gbnQkwpHxHc4CxaYcC-W0Hw4DRpBEjg5C35APu_0UICkAgs3LVNzqBEstnlql4j64gyZz-p6FceQzr_EQ4EOHVh8NOqmuZGvWH3LWwcMjxg5OVlzhg9kkU9wLhhOHu-pbY8QnTOh7Mo3e3xFDTyDk1XeZxK6fwh0cZcWxgUDPv1O4muy0Ex2Yvy3xzTAXetH1onTsWPlElky7eVruQGAHfrMtcknziR2U6oGMp50FEhg0RcnPE7fNxGtdpKV0g7Ff_8dO8JgRpvOC3yWXjNbyf_Ata5VtEgJPZCN5G1nxhdUVALi__mK0]--></g></svg>